process MISO = {

    source = PoolSource {
        untracked vstring fileNames = {
          'file:/data/slava77/cms/data/RelVal_2007_3_20_RelVal130pre6BJets50-120-DIGI-RECO_0000_2AF4E477-16D7-DB11-A481-0002B3AFAC5F.root'
#            'file:/data/slava77/cms/data/mc__2007__2__4__mc-onsel-120_PU_pp_muX-DIGI-RECO-NoPU__0002__007DD08A-CAB6-DB11-AEA0-001143D49026_RP130P4.root'
#fnal            '/store/RelVal/2007/3/20/RelVal130pre6Higgs-ZZ-4Mu-DIGI-RECO/0000/18DD0C06-EED6-DB11-BE27-001731AF698F.root'
#            '/store/RelVal/2007/3/20/RelVal130pre6Higgs-ZZ-4Mu-DIGI-RECO/0000/48777E3D-FDD6-DB11-B3E6-0002B3D8BE52.root'
        }
        untracked int32 maxEvents = -1
#        untracked uint32 skipEvents = 590
    }

    include "Configuration/EventContent/data/EventContent.cff"    
    module RECO = PoolOutputModule {
#        untracked string fileName = 'file:/data/slava77/cms/data/mc__2007__2__4__mc-onsel-120_PU_pp_muX-DIGI-RECO-NoPU__0002__007DD08A-CAB6-DB11-AEA0-001143D49026_RP130P4.root'
        untracked string fileName = 'file:isoTest.root'
        using FEVTSIMEventContent
    } 

#
#  drop all the INPUT stuff, BUT simulation
#
    
    replace RECO.outputCommands += "drop *_*_*_*"
    replace RECO.outputCommands += RecoMuonRECO.outputCommands
    replace RECO.outputCommands += "keep *_muIsoDepositCtfTk_*_*"
    replace RECO.outputCommands += "keep *_muIsoDepositCalByAssociatorHits_*_*"
    replace RECO.outputCommands += "keep *_muIsoDepositCalByAssociatorTowers_*_*"
    replace RECO.outputCommands += "keep *_muIsoDepositCal_*_*"
    replace RECO.outputCommands += "keep *_muIsolationSumInConesTracks_*_*"
    replace RECO.outputCommands += "keep *_muIsolationSumInConesTracksMuVetoed_*_*"


    include "Configuration/StandardSequences/data/FakeConditions.cff"
    include "Configuration/StandardSequences/data/Reconstruction.cff"

#    service = MessageLogger {
#       untracked vstring destinations = { "cout" }
#       untracked vstring debugModules = { "muIsoDepositCtfTk", 
#              "muIsoDepositCalByAssociatorHits", 
#              "muIsoDepositCalByAssociatorTowers", 
#              "muIsoDepositCal" }
#       untracked vstring categories = { "RecoMuon" , "MuonIsolation" }
#
#       untracked PSet cout = { 
#         untracked string threshold = "DEBUG" 
#         untracked int32 lineLength  = 132
#         untracked bool noLineBreaks = true
#         untracked PSet DEBUG = {untracked int32 limit = 0 }
#         untracked PSet RecoMuon = { untracked int32 limit = 10000000}
#         untracked PSet MuonIsolation = { untracked int32 limit = 10000000}
#       }
#    }
    include "FWCore/MessageLogger/data/MessageLogger.cfi"

    include "RecoMuon/MuonIsolationProducers/data/muIsoDepositCtfTk.cfi"
    include "RecoMuon/MuonIsolationProducers/data/muIsoDepositCalByAssociatorHits.cfi"
    include "RecoMuon/MuonIsolationProducers/data/muIsoDepositCalByAssociatorTowers.cfi"
    include "RecoMuon/MuonIsolationProducers/data/muIsoDepositCal.cfi"

    include "RecoMuon/MuonIsolationProducers/data/muIsolationSumInConesTracks.cfi"
    include "RecoMuon/MuonIsolationProducers/data/muIsolationSumInConesTracksMuVetoed.cfi"

    path p1 = {muIsoDepositCtfTk, 
               muIsoDepositCalByAssociatorHits, muIsoDepositCalByAssociatorTowers, 
               muIsoDepositCal,
               muIsolationSumInConesTracks,
               muIsolationSumInConesTracksMuVetoed
              }
    endpath outpath = {RECO}
}
