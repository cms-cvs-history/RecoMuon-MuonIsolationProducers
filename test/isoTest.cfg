process MISO = {

    source = PoolSource {
        untracked vstring fileNames = {
          'file:/data/slava77/cms/data/RelVal_2007_3_20_RelVal130pre6BJets50-120-DIGI-RECO_0000_2AF4E477-16D7-DB11-A481-0002B3AFAC5F.root'
#            'file:/data/slava77/cms/data/mc__2007__2__4__mc-onsel-120_PU_pp_muX-DIGI-RECO-NoPU__0002__007DD08A-CAB6-DB11-AEA0-001143D49026_RP130P4.root'
#fnal            '/store/RelVal/2007/3/20/RelVal130pre6Higgs-ZZ-4Mu-DIGI-RECO/0000/18DD0C06-EED6-DB11-BE27-001731AF698F.root'
#            '/store/RelVal/2007/3/20/RelVal130pre6Higgs-ZZ-4Mu-DIGI-RECO/0000/48777E3D-FDD6-DB11-B3E6-0002B3D8BE52.root'
        }
        untracked int32 maxEvents = -1
#        untracked uint32 skipEvents = 590
    }

    include "Configuration/EventContent/data/EventContent.cff"    
    module RECO = PoolOutputModule {
        untracked string fileName = 'file:isoTest.root'
        using FEVTSIMEventContent
    } 

#
#  drop all the INPUT stuff, BUT simulation
#
    
include "./RecoMuon/MuonIsolationProducers/data/muIsolation_EventContent.cff"

    replace RECO.outputCommands += "drop *_*_*_*"
    replace RECO.outputCommands += RecoMuonRECO.outputCommands
    replace RECO.outputCommands += RecoMuonIsolationRECO.outputCommands

    include "Configuration/StandardSequences/data/FakeConditions.cff"
#    include "Configuration/StandardSequences/data/Reconstruction.cff"
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
    include "Geometry/CommonDetUnit/data/globalTrackingGeometry.cfi"
    include "TrackPropagation/SteppingHelixPropagator/data/SteppingHelixPropagatorAny.cfi"

#    service = MessageLogger {
#       untracked vstring destinations = { "cout" }
#       untracked vstring debugModules = { "muIsoDepositCtfTk", 
#              "muIsoDepositCalByAssociatorHits", 
#              "muIsoDepositCalByAssociatorTowers", 
#              "muIsoDepositCal" }
#       untracked vstring categories = { "RecoMuon" , "MuonIsolation" }
#
#       untracked PSet cout = { 
#         untracked string threshold = "DEBUG" 
#         untracked int32 lineLength  = 132
#         untracked bool noLineBreaks = true
#         untracked PSet DEBUG = {untracked int32 limit = 0 }
#         untracked PSet RecoMuon = { untracked int32 limit = 10000000}
#         untracked PSet MuonIsolation = { untracked int32 limit = 10000000}
#       }
#    }
    include "FWCore/MessageLogger/data/MessageLogger.cfi"

    #seqs: muIsoDepositsTk, muIsoDepositsCal, muIsoDepositsAssoc == muIsoDepositsAll
    include "RecoMuon/MuonIsolationProducers/data/muIsoDeposits.cff"

    #seqs: muIsolationSumsTk, 
    #      (muIsolationSumsAssocTowers, muIsolationSumsAssocHits == muIsolationSumsAssocAll),
    #      muIsolationSumsCal
    #      == muIsolationSumsAll
    include "RecoMuon/MuonIsolationProducers/data/muIsolationSumInCones.cff"

    path p1 = { muIsoDepositsAll, muIsolationSumsAll
              }

    endpath outpath = {RECO}
}
