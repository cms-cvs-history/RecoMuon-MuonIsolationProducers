process MISO = {

    untracked PSet maxEvents=
    {
        untracked int32 input = -1
    }


    source = PoolSource {
        untracked vstring fileNames = {
           'file:/somewhere/somefile.root'
        }
    }

    include "Configuration/EventContent/data/EventContent.cff"    
    module RECO = PoolOutputModule {
        untracked string fileName = 'file:isoTest.root'
        using FEVTSIMEventContent
    } 

#
#  drop all the INPUT stuff, BUT simulation
#
    
include "RecoMuon/MuonIsolationProducers/data/muIsolation_EventContent.cff"

    replace RECO.outputCommands += "drop *_*_*_*"
    replace RECO.outputCommands += RecoMuonRECO.outputCommands
    replace RECO.outputCommands += RecoMuonIsolationRECO.outputCommands

    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cff"
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
    include "Geometry/CommonDetUnit/data/globalTrackingGeometry.cfi"
    include "TrackPropagation/SteppingHelixPropagator/data/SteppingHelixPropagatorAny.cfi"

#    service = MessageLogger {
#       untracked vstring destinations = { "cout" }
#       untracked vstring debugModules = { "muIsoDepositCtfTk", 
#              "muIsoDepositCalByAssociatorHits", 
#              "muIsoDepositCalByAssociatorTowers", 
#              "muIsoDepositCal" }
#       untracked vstring categories = { "RecoMuon" , "MuonIsolation" }
#
#       untracked PSet cout = { 
#         untracked string threshold = "DEBUG" 
#         untracked int32 lineLength  = 132
#         untracked bool noLineBreaks = true
#         untracked PSet DEBUG = {untracked int32 limit = 0 }
#         untracked PSet RecoMuon = { untracked int32 limit = 10000000}
#         untracked PSet MuonIsolation = { untracked int32 limit = 10000000}
#       }
#    }
    include "FWCore/MessageLogger/data/MessageLogger.cfi"

    #seqs: muIsoDepositsTk, muIsoDepositsCal, muIsoDepositsAssoc == muIsoDepositsAll
    include "RecoMuon/MuonIsolationProducers/data/muIsoDeposits.cff"

    #seqs: muIsolationSumsTk, 
    #      (muIsolationSumsAssocTowers, muIsolationSumsAssocHits == muIsolationSumsAssocAll),
    #      muIsolationSumsCal
    #      == muIsolationSumsAll
    include "RecoMuon/MuonIsolationProducers/data/muIsolationSumInCones.cff"

    path p1 = { muIsoDepositsAll, muIsolationSumsAll
              }

    endpath outpath = {RECO}
}
